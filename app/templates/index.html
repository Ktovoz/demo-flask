{% extends "layouts/app_base.html" %}

{% block title %}用户管理后台{% endblock %}

{% block styles %}
{{ super() }}
<style>
    .content-card {
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
        padding: 1.75rem;
        margin-bottom: 2rem;
    }
    .badge { letter-spacing: 0.5px; }
</style>
{% endblock %}

{% block sidebar %}
    {% include "partials/sidebar.html" with context %}
{% endblock %}

{% block app_content %}
    <div id="alertContainer"></div>
    <input type="hidden" id="csrfToken" value="{{ csrf_token() }}">
    <input type="hidden" id="currentUserId" value="{{ current_user.id }}">

    {% include "partials/user_table.html" with context %}
    {% include "partials/group_panel.html" with context %}
    {% include "partials/user_modals.html" with context %}
{% endblock %}

{% block scripts %}
{{ super() }}
    <script id="initialData" type="application/json">
        {{ {
            'users': users_data,
            'groups': groups_data,
            'permissions': {
                'add': current_user.has_permission('add_user'),
                'edit': current_user.has_permission('edit_user'),
                'delete': current_user.has_permission('delete_user'),
            }
        } | tojson }}
    </script>
    {% include "partials/dashboard_scripts.html" %}
    <script>Dashboard.init();</script>
{% endblock %}
