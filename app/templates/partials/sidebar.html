<div class="sidebar-user card bg-transparent border-0 text-white">
    <div class="card-body p-0 d-flex flex-column gap-3">
        <div class="d-flex align-items-center gap-3">
            <div class="sidebar-avatar d-flex align-items-center justify-content-center">
                <span class="fw-semibold">{{ user.username[0]|upper }}</span>
            </div>
            <div>
                <div class="fw-semibold">{{ user.username|default("未登录") }}</div>
                <div class="text-white-50 small">{{ user.group_name|default("无用户组") }}</div>
            </div>
        </div>
        <form method="post" action="{{ url_for('auth.logout') }}" class="m-0">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit" class="btn btn-outline-light btn-sm w-100">
                <i class="bi bi-box-arrow-right me-1"></i>退出登录
            </button>
        </form>
    </div>
</div>

<div class="sidebar-section">
    <div class="section-title text-uppercase text-white-50 small">导航</div>
    <nav class="sidebar-nav d-flex flex-column gap-2" id="sidebarNav">
        <button type="button" class="sidebar-link active" data-view="users">
            <i class="bi bi-people-fill"></i>
            <span>用户列表</span>
        </button>
        <button type="button" class="sidebar-link" data-view="groups">
            <i class="bi bi-collection"></i>
            <span>用户组管理</span>
        </button>
    </nav>
</div>

<div class="sidebar-section mt-4">
    <div class="section-title text-uppercase text-white-50 small">常用操作</div>
    <div class="d-grid gap-2">
        <button type="button" class="btn btn-outline-light btn-sm" onclick="Dashboard.showView('users')">
            <i class="bi bi-person-lines-fill me-1"></i>管理用户
        </button>
        <button type="button" class="btn btn-outline-light btn-sm" onclick="Dashboard.showView('groups')">
            <i class="bi bi-diagram-3 me-1"></i>查看用户组
        </button>
    </div>
</div>

<style>
.sidebar-avatar {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    background: rgba(255, 255, 255, 0.16);
    font-size: 1.1rem;
}

.sidebar-section + .sidebar-section {
    margin-top: 2rem;
}

.section-title {
    letter-spacing: 0.08em;
    margin-bottom: 0.75rem;
}

.sidebar-nav .sidebar-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    padding: 0.75rem 1rem;
    border: none;
    border-radius: 12px;
    background: transparent;
    color: rgba(255, 255, 255, 0.72);
    font-weight: 500;
    transition: background 0.2s ease, transform 0.2s ease;
}

.sidebar-nav .sidebar-link i {
    font-size: 1.2rem;
}

.sidebar-nav .sidebar-link.active,
.sidebar-nav .sidebar-link:hover {
    background: rgba(255, 255, 255, 0.16);
    color: #fff;
    transform: translateX(4px);
}
</style>
